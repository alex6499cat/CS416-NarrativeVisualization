<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script>
<script type="text/javascript" >
    function svg_slides(svg,delay) {
        var slides={},
            slide = 0,
            delay = delay ? delay : 3500;
            
        svg.attr("preserveAspectRatio","xMidYid meet");
    
        rects = svg.selectAll("rect")[0];
    
        for (i=0;i<rects.length;i++) {
            id = rects[i].id;
            console.log(id);
            if (id.slice(0,6)=='slide_') { 
                slides[id.slice(6)]=rects[i] 
                rects[i].scale_x = d3.scale.linear().range([rects[i].x.baseVal.value,rects[i].x.baseVal.value+rects[i].width.baseVal.value]).domain([0,1000]);
                rects[i].scale_y = d3.scale.linear().range([rects[i].y.baseVal.value,rects[i].y.baseVal.value+rects[i].height.baseVal.value]).domain([0,1000]);
                }
            
        }
    
        keys = Object.keys(slides).sort();
        slides.keys = keys;
     
        function next_slide()  {
            svg.transition().duration(delay).attr("viewBox",slides[keys[slide]].x.baseVal.value+" "+slides[keys[slide]].y.baseVal.value+" "+slides[keys[slide]].width.baseVal.value+" "+slides[keys[slide]].height.baseVal.value);
        }
    
        d3.select("body").on("touchmove", function() { if(slide<keys.length-1) {slide++; console.log(slide);}});
    
        d3.select(window).on("keydown", function() {
            switch (d3.event.keyCode) {
              case 37: {if (slide>0) {slide=slide-1; console.log(slide);next_slide()};break}
              case 39: {if(slide<keys.length-1) {slide++; console.log(slide);next_slide()};break}
              case 36: {slide = 0;next_slide();break}
              case 35: {slide = keys.length -1; next_slide();break}
            }
            
         });
    
        // Start with the first slide
        next_slide();
        return slides
    }

    
    // There are probably better ways of loading the SVG, but this is one example I found

    d3.xml("test.svg", "image/svg+xml", function(xml) {
        d3.select("body").node().appendChild(xml.documentElement);
        
        svg=d3.select("body").select("svg")
            .attr("height","100%")
            .attr("width","100%");
        slides = svg_slides(svg,1500);
      
        // Lets test the slide scales - put a bouncing ball on slide id 3
        s = slides[3];
        circle = svg.append("svg:circle")
            .attr("cx",s.scale_x(500)).attr("cy",s.scale_y(500))
            .attr("r",20)
            .style("fill","steelblue");
        
        next = 500;                
        
        function bounce() {
            next = -next;
            circle.transition().duration(2500).attr("cx",s.scale_x(500+next))
            .each("end",bounce);
        }
        
        bounce();     
    });

</script>
</head>
<body></body>
</html>